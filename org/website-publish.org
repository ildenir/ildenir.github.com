#+TITLE: Geracao estatica website com emacs org-mode
#+DATE: <2017-09-05 Tue>
#+AUTHOR: Ildenir Barbosa
#+EMAIL: ildenir+github@googlemail.com
#+LANGUAGE: pt_BR
#+CREATOR: Emacs 25.2.1 (Org mode 9.0.9)

* Overview
Este documento descreve o processo geracao estatica do site baseada no
modulo org-mode do emacs. Este documento deve ser processado pelo
org-mode babel para gerar o script em elisp .

O objetivo site eh ser simples e com pouco conteudo
dinamico. basicamente um conjunto de paginas de artigos e breve biografia.

  
#+BEGIN_EXAMPLE
../
├── index.html
├── main.js
├── note.org
├── org
│   ├── css
│   │   └── style.css
│   ├── image
│   ├── index.org
│   └── website-publish.org
├── README.md
├── style.css
└── style.css~
#+END_EXAMPLE


** Variaveis utilitarias

#+BEGIN_SRC emacs-lisp :tangle website-publish.el
(defvar project-dir (expand-file-name (file-name-as-directory "~/ProjectsGitHub/ildenir.github.com/"))
"Diretorio do projeto do website")

(defvar publish-dir (expand-file-name (concat project-dir "website"))
"Diretorio onde sera publicado o website")

(defvar src-dir (expand-file-name (concat project-dir "org"))
"Diretorio dos arquivos fonte org, imagens, css e ...")
#+END_SRC

** Header e footer do site
   cada pagina possui a barra de navegacao e um rodape com referencia
   ao emacs como gerenciador de conteudo, data da ultima atualizacao

#+BEGIN_SRC emacs-lisp :tangle website-publish.el
(defvar website-html-preamble "

<div id=\"mySidenav\" class=\"sidenav\">
  <ul class=\"menu-principal\">
    <li><a href=\"javascript:void(0)\" class=\"closebtn\" onclick=\"closeNav()\">&times;</a>
    <li><a href=\"index.html\"> Home </a></li>
    <li> <a href=\"articles.html\"> Articles </a></li>
    <li><a href=\"about.html\"> About </a></li>
  </ul>

  <ul class=\"rede-social\">
    <li><a href=\"http://twitter.com/Uilcoder\"><span class=\"fa fa-twitter\"></span></a></li>
    <li><a href=\"http://github.com/ildenir\"><span class=\"fa fa-github\"></span></a></li>
  </ul>
</div>

<header class=\"barra\">
  <div class=\"cabecalho-barra\">
    <span onclick=\"openNav()\" class=\"w3-button\" > 
      <span class=\"fa fa-bars\"></span> 
    </span>
    <p class=\"cabecalho-titulo\"> Pagina pessoal </p>
  </div>
</header>

")

(defvar website-html-postamble "")

(defvar website-html-head "<link rel=\"stylesheet\" href=\"css/style.css\">
<link rel=\"stylesheet\" href=\"font-awesome-4.7.0/css/font-awesome.css\">
<script src=\"js/main.js\"></script>")

#+END_SRC

** conteudo dinamico para pagina principal



** Componentes do projeto
#+BEGIN_SRC emacs-lisp :tangle website-publish.el
(require 'ox-publish)
(setq org-publish-project-alist
      `(
	("org-notes"
	 :base-directory ,src-dir
	 :base-extension "org"
	 :publishing-directory ,publish-dir
	 :recursive t
	 :publishing-function org-html-publish-to-html
	 :headline-levels 4             ; Just the default for this project.
	 :auto-preamble t
	 :org-html-doctype html5
	 :html-preamble ,website-html-preamble
	 :html-postamble ,website-html-postamble
	 :html-head ,website-html-head
	 )
	("org-static"
	 :base-directory ,src-dir
	 :base-extension "css\\|js\\|png\\|jpg\\|gif\\|pdf\\|mp3\\|ogg\\|swf|otf\\|woff\\|woff2\\|ttf\\|svg"
	 :publishing-directory ,publish-dir
	 :recursive t
	 :publishing-function org-publish-attachment
	 )
	("org" :components ("org-notes" "org-static"))))
#+END_SRC

** Utilitaria para criar novo

* Referencia
  - [[http://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html][Publishing Org-mode files to html]]
  - [Dale]    [[http://dale.io/blog/automated-org-publishing.html][Automated Publishing Pipeline with Org Mode]]
  - [Petton]  [[https://nicolas.petton.fr/blog/blogging-with-org-mode.html#org77b6e84][Blogging with org-mode]]
  - [jgkamat] [[https://jgkamat.github.io/blog/website1.html][Creating a blog in Org Mode]]
